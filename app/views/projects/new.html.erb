<% @page_title = "New Project" %>

<div class="panel panel--centered">
  <%= form_with model: @project, class: "flex flex-column gap", data: { controller: "form", action: "submit->form#preventEmptySubmit" } do |form| %>
    <h1 class="txt-x-large margin-none font-weight-black"><%= @page_title %></h1>

    <% if @project.errors.any? %>
      <div class="message message--error">
        <ul>
          <% @project.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="flex flex-column gap-half">
      <%= form.text_field :name, required: true, class: "input full-width", autofocus: true, autocomplete: "off", placeholder: "Project Name", data: { form_target: "input", action: "keydown.esc@document->form#cancel" } %>
      <%= form.text_area :description, class: "input full-width", rows: 3, placeholder: "Description (optional)" %>
    </div>

    <button type="submit" class="btn btn--link center">
      <span>Create Project</span>
      <%= icon_tag "arrow-right" %>
    </button>

    <%= link_to "Cancel", projects_path, data: { form_target: "cancel" }, hidden: true %>
  <% end %>
</div>
