<%= bridged_form_with model: project, class: "flex flex-column gap", data: { controller: "form", action: "submit->form#preventEmptySubmit" } do |form| %>
  <h1 class="txt-x-large margin-none font-weight-black"><%= project.persisted? ? "Edit Project" : "New Project" %></h1>

  <% if project.errors.any? %>
    <div class="message message--error">
      <h2><%= pluralize(project.errors.count, "error") %> prohibited this project from being saved:</h2>
      <ul>
        <% project.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="flex flex-column gap-half">
    <%= form.text_field :name, required: true, class: "input full-width", autofocus: !project.persisted?, autocomplete: "off", placeholder: "Name it…", data: { form_target: "input", action: "keydown.esc@document->form#cancel", validation_message: "Project names can't be blank" } %>

    <%= form.text_area :description, class: "input full-width", rows: 5, placeholder: "Describe this project…", data: { action: "keydown.esc@document->form#cancel" } %>
  </div>

  <button type="submit" class="btn btn--link center" data-bridge--form-target="submit">
    <span><%= project.persisted? ? "Update Project" : "Create Project" %></span>
    <%= icon_tag "arrow-right" %>
  </button>

  <%= link_to "Cancel and go back", projects_path, data: { form_target: "cancel", turbo_frame: "_top" }, hidden: true %>
<% end %>
